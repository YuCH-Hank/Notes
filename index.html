<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>Pipe Selector (Web)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="app-root">
      <!-- App Header -->
      <header class="app-header">
        <div class="header-main">
          <div class="header-title">
            <span class="app-logo">管</span>
            <div>
              <div class="app-name">Pipe Selector</div>
              <div class="app-subtitle">管路系列工具集</div>
            </div>
          </div>
          <button
            id="themeToggle"
            class="icon-button"
            aria-label="切換深色／淺色模式"
          >
            🌙
          </button>
        </div>

        <!-- 分頁 / 工具切換 -->
        <nav class="tool-nav">
          <button class="tool-tab active" data-tool-target="quick">
            風量快查
          </button>
          <button class="tool-tab" data-tool-target="flow">風量計算</button>
          <button class="tool-tab" data-tool-target="rect-round">
            四角轉圓
          </button>
        </nav>
      </header>

      <!-- App Main -->
      <main class="app-main">
        <!-- ==========================
           例子 3：風量快查表
           ========================== -->
        <section class="card tool-section active" data-tool="quick">
          <h2>風量快查表</h2>

          <!-- 固定風速 -->
          <div class="row">
            <label for="quickSpeedInput">固定風速:</label>
            <input id="quickSpeedInput" type="number" placeholder="例如：13" />
            <select id="quickSpeedUnit"></select>
          </div>

          <!-- 結果表格：CMM + 兩組推薦管徑 -->
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>CMM</th>
                  <th>推薦管徑 1 (mm)</th>
                  <th>管路風量上限 1 (CMM)</th>
                  <th>效率 1 (%)</th>
                  <th>推薦管徑 2 (mm)</th>
                  <th>管路風量上限 2 (CMM)</th>
                  <th>效率 2 (%)</th>
                </tr>
              </thead>
              <tbody id="quickTableBody">
                <!-- 由 JS 動態新增列，每列第一欄為輸入 -->
              </tbody>
            </table>
          </div>

          <!-- 新增列 / 計算按鈕 -->
          <div class="row">
            <button id="quickAddRowBtn" type="button">新增風量列</button>
            <button id="quickCalcBtn" type="button">重新計算</button>
          </div>

          <div id="quickMessage" class="message"></div>
        </section>

        <!-- ==========================
           例子 1：風量計算器
           ========================== -->
        <section class="card tool-section" data-tool="flow">
          <h2>風量計算器</h2>

          <div class="row">
            <label for="volumeInput">風量 (逗號或空白分隔):</label>
            <input
              id="volumeInput"
              class="flex-input"
              placeholder="例如：10, 20, 30"
            />
            <span>單位:</span>
            <select id="volumeUnit"></select>
          </div>

          <div class="row">
            <label for="speedInput">風速:</label>
            <input
              id="speedInput"
              class="flex-input"
              placeholder="例如：10 (m/s)"
            />
            <span>單位:</span>
            <select id="speedUnit"></select>
          </div>

          <div class="row">
            <button id="calcAreaBtn">計算面積與推薦管徑</button>
          </div>

          <div id="areaMessage" class="message"></div>

          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>輸入風量</th>
                  <th>累積風量</th>
                  <th>風速</th>
                  <th>推薦管徑</th>
                  <th>截面積 (需求 / 推薦)</th>
                </tr>
              </thead>
              <tbody id="areaTableBody"></tbody>
            </table>
          </div>
        </section>

        <!-- ==========================
           例子 2：四角轉圓
           ========================== -->
        <section class="card tool-section" data-tool="rect-round">
          <h2>四角轉圓</h2>

          <!-- 四角轉圓：矩形 -> 圓管 -->
          <div class="row">
            <label for="lengthInput">長度:</label>
            <input id="lengthInput" type="number" />
            <select id="lengthUnit"></select>
          </div>

          <div class="row">
            <label for="widthInput">寬度:</label>
            <input id="widthInput" type="number" />
            <select id="widthUnit"></select>
          </div>

          <div class="row">
            <button id="calcDiameterBtn">計算圓管直徑</button>
          </div>

          <div id="diameterOutput" class="output"></div>

          <hr />

          <!-- 圓轉方：圓管 -> 建議方管尺寸 -->
          <h3>圓轉方</h3>

          <div class="row">
            <label for="roundToRectDiameter">圓管直徑 (mm):</label>
            <input
              id="roundToRectDiameter"
              type="number"
              placeholder="例如：300"
            />
            <button id="roundToRectBtn" type="button">產生方管建議</button>
          </div>

          <div id="roundToRectMessage" class="message"></div>

          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>方管長 (mm)</th>
                  <th>方管寬 (mm)</th>
                  <th>方/圓面積比</th>
                </tr>
              </thead>
              <tbody id="roundToRectTableBody"></tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="src/main.js"></script>
  </body>
</html>
